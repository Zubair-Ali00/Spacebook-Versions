{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { useRoute } from '@react-navigation/native';\nimport SpFriendrq from \"../components/friendrq\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  center: {\n    alignItems: 'center',\n    backgroundColor: 'rgba(39, 154, 241, 0.98)',\n    height: '100%'\n  },\n  scroll: {\n    paddingBottom: 50,\n    paddingLeft: 30,\n    paddingRight: 30\n  },\n  users: {\n    top: 50\n  },\n  searchbar: {\n    elevation: 20,\n    shadowColor: '#52006A',\n    borderRadius: 20,\n    flexDirection: 'row',\n    width: 200,\n    backgroundColor: \"white\",\n    alignItems: 'center',\n    marginTop: '10%',\n    height: \"7%\"\n  },\n  input: {\n    flex: 5,\n    paddingLeft: 20\n  },\n  button: {\n    flex: 3,\n    backgroundColor: '#F1D0C5',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderTopEndRadius: 20,\n    borderBottomEndRadius: 20\n  },\n  top: {\n    flexDirection: 'row',\n    backgroundColor: '#F1D0C5',\n    borderRadius: 20,\n    width: '30%',\n    height: '5%',\n    justifyContent: 'center',\n    top: '5%'\n  },\n  button2: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nvar ViewFriends = function ViewFriends(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      requests = _useState2[0],\n      setRequests = _useState2[1];\n\n  var abortController = new AbortController();\n  var route = useRoute();\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingT = _useState4[0],\n      setLoadingT = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      auth = _useState6[0],\n      setAuth = _useState6[1];\n\n  useEffect(function () {\n    var getAuth = function getAuth() {\n      var data, auth;\n      return _regeneratorRuntime.async(function getAuth$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"userAuth\"));\n\n            case 3:\n              data = _context.sent;\n              auth = JSON.parse(data);\n              setAuth(auth);\n\n              if (Number.isInteger(auth.id)) {\n                setLoadingT(false);\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 9]], Promise);\n    };\n\n    getAuth();\n    return function cleanup() {\n      abortController.abort();\n    };\n  });\n  useEffect(function () {\n    var page = function page() {\n      var xhttp;\n      return _regeneratorRuntime.async(function page$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:3333/api/1.0.0/friendrequests/', {\n                method: 'GET',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'X-Authorization': auth.token\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (text) {\n                setRequests(text);\n              }).catch(function (res) {}));\n\n            case 2:\n              xhttp = _context2.sent;\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    page();\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, [requests, loadingT, route]);\n  return _jsxs(View, {\n    style: styles.center,\n    children: [_jsx(View, {\n      style: styles.top,\n      children: _jsx(Pressable, {\n        style: [styles.button2, {\n          marginLeft: 3,\n          paddingLeft: 3\n        }],\n        onPress: function onPress() {\n          return navigation.navigate('MyPage');\n        },\n        children: _jsx(Text, {\n          style: [styles.pressText, {\n            color: '#e86868',\n            justifyContent: 'center'\n          }],\n          children: \"Home\"\n        })\n      })\n    }), _jsx(ScrollView, {\n      contentContainerStyle: styles.scroll,\n      children: requests.map(function (rq) {\n        return _jsx(SpFriendrq, {\n          style: [styles.users],\n          first_name: rq.first_name,\n          last_name: rq.last_name,\n          email: rq.email,\n          id: rq.user_id,\n          token: auth.token\n        }, rq.user_id);\n      })\n    })]\n  });\n};\n\nexport default ViewFriends;","map":{"version":3,"sources":["/Users/blackbeats/Documents/TelegramWork/reactNative/spacebook/Pages/Requests.js"],"names":["React","useEffect","useState","useRoute","SpFriendrq","AsyncStorage","styles","StyleSheet","create","center","alignItems","backgroundColor","height","scroll","paddingBottom","paddingLeft","paddingRight","users","top","searchbar","elevation","shadowColor","borderRadius","flexDirection","width","marginTop","input","flex","button","justifyContent","borderTopEndRadius","borderBottomEndRadius","button2","ViewFriends","navigation","requests","setRequests","abortController","AbortController","route","loadingT","setLoadingT","auth","setAuth","getAuth","getItem","data","JSON","parse","Number","isInteger","id","console","log","cleanup","abort","page","fetch","method","headers","token","then","response","json","text","catch","res","xhttp","marginLeft","navigate","pressText","color","map","rq","first_name","last_name","email","user_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Text, TextInput, View, StyleSheet, ScrollView, Pressable } from 'react-native';\n\nimport {useRoute} from '@react-navigation/native';\n\nimport SpFriendrq from '../components/friendrq';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst styles = StyleSheet.create({\n  center: {\n    alignItems: 'center',\n    backgroundColor: 'rgba(39, 154, 241, 0.98)',\n    height: '100%' \n  },\n  scroll:{\n    paddingBottom: 50,\n    paddingLeft: 30,\n    paddingRight: 30\n  },\n  users: {\n    top: 50,\n  },\n  searchbar:{\n    elevation: 20,\n    shadowColor: '#52006A',\n    borderRadius: 20,\n    flexDirection: 'row',\n    width: 200, \n    backgroundColor: \"white\",\n    alignItems: 'center',\n    marginTop: '10%', \n    height: \"7%\",\n  },\n  input:{\n    flex: 5,  \n    paddingLeft: 20,    \n  },\n  button:{\n    flex: 3,\n    backgroundColor: '#F1D0C5',\n    height: '100%',    \n    alignItems: 'center',\n    justifyContent: 'center',\n    borderTopEndRadius: 20,\n    borderBottomEndRadius: 20,\n  },\n  top:{\n    flexDirection: 'row',\n    backgroundColor: '#F1D0C5',\n    borderRadius: 20,\n    width: '30%',\n    height: '5%',\n    justifyContent: 'center',\n    top: '5%'\n  },\n  button2:{\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\n\n\nconst ViewFriends = ({navigation}) => {\n  const [requests, setRequests] = useState([]);\n  \n  const abortController = new AbortController();\n\n  const route = useRoute();\n\n  const [loadingT, setLoadingT] = useState(true);\n  const [auth, setAuth] = useState([]);\n  useEffect (() =>\n  {\n    const getAuth = async() =>{\n      try{\n        let data = await AsyncStorage.getItem(\"userAuth\");\n        var auth = JSON.parse(data)\n        //console.log(JSON.parse(auth))\n        //console.log(auth.id)\n\n        setAuth(auth);\n\n        if(Number.isInteger(auth.id)){\n          setLoadingT(false);\n        }\n      }catch(err) {\n        console.log(err)\n      }\n    }\n\n    getAuth();\n\n    return function cleanup(){\n      abortController.abort()\n    }\n  });\n\n  useEffect(() => {\n  const page = async () => {\n    const xhttp = await fetch('http://localhost:3333/api/1.0.0/friendrequests/', {\n                  method: 'GET',\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                    'X-Authorization': auth.token,\n                  }\n                })\n                .then((response) => response.json())\n                .then((text) => {\n                    setRequests(text); \n                    //console.log(requests)                         \n                })\n                .catch(function (res){\n                  //console.log(res)\n                });\n  }\n\n  page();\n\n  return function cleanup() {\n    abortController.abort()\n  }\n  },[requests, loadingT, route]);\n\n\n\n  return (\n  \n    \n    <View style={styles.center}>\n\n        <View style={styles.top}>\n\n        <Pressable style={[styles.button2, {marginLeft: 3, paddingLeft: 3} ]}  onPress={() => navigation.navigate('MyPage')}>\n              <Text style={[styles.pressText, {color: '#e86868', justifyContent: 'center'}]}>Home</Text>\n        </Pressable>\n\n        </View>\n\n        <ScrollView contentContainerStyle={styles.scroll}>\n          {requests.map((rq) => (\n            <SpFriendrq style={[styles.users]} key={rq.user_id}\n              first_name={rq.first_name}\n              last_name={rq.last_name}\n              email= {rq.email}\n              id = {rq.user_id}\n              token = {auth.token}\n            />            \n          ))}\n        </ScrollView>\n        \n\n\n    </View>\n  );\n}\n\nexport default ViewFriends;"]},"metadata":{},"sourceType":"module"}