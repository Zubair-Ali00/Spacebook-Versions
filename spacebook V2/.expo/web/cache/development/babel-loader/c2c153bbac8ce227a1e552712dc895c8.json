{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SpFriend from \"../components/Friends\";\nimport { useRoute } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  center: {\n    alignItems: 'center',\n    backgroundColor: 'rgba(39, 154, 241, 0.98)',\n    height: '100%'\n  },\n  friends: {\n    paddingBottom: 50,\n    paddingLeft: 30,\n    paddingRight: 30\n  },\n  searchbar: {\n    elevation: 20,\n    shadowColor: '#52006A',\n    borderRadius: 20,\n    flexDirection: 'row',\n    width: 200,\n    backgroundColor: \"white\",\n    alignItems: 'center',\n    marginTop: '10%',\n    height: \"7%\"\n  },\n  input: {\n    flex: 5,\n    paddingLeft: 20\n  },\n  button: {\n    flex: 3,\n    backgroundColor: '#F1D0C5',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderTopEndRadius: 20,\n    borderBottomEndRadius: 20\n  },\n  top: {\n    flexDirection: 'row',\n    backgroundColor: '#F1D0C5',\n    borderRadius: 20,\n    width: '30%',\n    height: '5%',\n    justifyContent: 'center',\n    top: '5%'\n  },\n  button2: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nfunction ViewFriends(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      term = _useState4[0],\n      setTerm = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      st = _useState6[0],\n      setSt = _useState6[1];\n\n  var route = useRoute();\n  var abortController = new AbortController();\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loadingT = _useState8[0],\n      setLoadingT = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      auth = _useState10[0],\n      setAuth = _useState10[1];\n\n  useEffect(function () {\n    var getAuth = function getAuth() {\n      var data, auth;\n      return _regeneratorRuntime.async(function getAuth$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"userAuth\"));\n\n            case 3:\n              data = _context.sent;\n              auth = JSON.parse(data);\n              setAuth(auth);\n\n              if (Number.isInteger(auth.id)) {\n                setLoadingT(false);\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 9]], Promise);\n    };\n\n    getAuth();\n    return function cleanup() {\n      abortController.abort();\n    };\n  });\n  useEffect(function () {\n    if (term.length <= 0) {\n      term == \"\";\n    }\n\n    var page = function page() {\n      var xhttp;\n      return _regeneratorRuntime.async(function page$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:3333/api/1.0.0/search?q=' + term + '&search_in=friends', {\n                method: 'GET',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'X-Authorization': auth.token\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (text) {\n                setSearch(text);\n              }).catch(function (res) {}));\n\n            case 2:\n              xhttp = _context2.sent;\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    page();\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, [term, loadingT, route]);\n  return _jsxs(View, {\n    style: styles.center,\n    children: [_jsx(View, {\n      style: styles.top,\n      children: _jsx(Pressable, {\n        style: [styles.button2, {\n          marginLeft: 3,\n          paddingLeft: 3\n        }],\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: _jsx(Text, {\n          style: [styles.pressText, {\n            color: '#e86868',\n            justifyContent: 'center'\n          }],\n          children: \"Home\"\n        })\n      })\n    }), _jsxs(View, {\n      style: styles.searchbar,\n      children: [_jsx(TextInput, {\n        style: styles.input,\n        onChangeText: function onChangeText(text) {\n          return setSt(text);\n        },\n        placeholder: \"name..\",\n        keyboardType: \"default\"\n      }), _jsx(Pressable, {\n        style: styles.button,\n        onPress: function onPress() {\n          return setTerm(st);\n        },\n        children: _jsx(Text, {\n          style: styles.pressText,\n          children: \"Search\"\n        })\n      })]\n    }), _jsx(ScrollView, {\n      contentContainerStyle: styles.friends,\n      children: search.map(function (user) {\n        return _jsx(SpFriend, {\n          user: user.user_id,\n          first_name: user.user_familyname,\n          last_name: user.user_givenname,\n          token: auth.token\n        }, user.user_id);\n      })\n    })]\n  });\n}\n\nexport default ViewFriends;","map":{"version":3,"sources":["/Users/blackbeats/Documents/TelegramWork/reactNative/spacebook/Pages/ViewFriends.js"],"names":["React","useEffect","useState","SpFriend","useRoute","AsyncStorage","styles","StyleSheet","create","center","alignItems","backgroundColor","height","friends","paddingBottom","paddingLeft","paddingRight","searchbar","elevation","shadowColor","borderRadius","flexDirection","width","marginTop","input","flex","button","justifyContent","borderTopEndRadius","borderBottomEndRadius","top","button2","ViewFriends","navigation","search","setSearch","term","setTerm","st","setSt","route","abortController","AbortController","loadingT","setLoadingT","auth","setAuth","getAuth","getItem","data","JSON","parse","Number","isInteger","id","console","log","cleanup","abort","length","page","fetch","method","headers","token","then","response","json","text","catch","res","xhttp","marginLeft","goBack","pressText","color","map","user","user_id","user_familyname","user_givenname"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Text, TextInput, View, StyleSheet, Pressable, ScrollView } from 'react-native';\n\nimport SpFriend from '../components/Friends';\n\nimport {useRoute} from '@react-navigation/native';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst styles = StyleSheet.create({\n  center: {\n    alignItems: 'center',\n    backgroundColor: 'rgba(39, 154, 241, 0.98)',\n    height: '100%' \n  },\n  friends:{\n    //position: 'absolute',\n    paddingBottom: 50,\n    paddingLeft: 30,\n    paddingRight: 30\n  },\n  searchbar:{\n    elevation: 20,\n    shadowColor: '#52006A',\n    borderRadius: 20,\n    flexDirection: 'row',\n    width: 200, \n    backgroundColor: \"white\",\n    alignItems: 'center',\n    marginTop: '10%', \n    height: \"7%\",\n  },\n  input:{\n    flex: 5,  \n    paddingLeft: 20,    \n  },\n  button:{\n    flex: 3,\n    backgroundColor: '#F1D0C5',\n    height: '100%',    \n    alignItems: 'center',\n    justifyContent: 'center',\n    borderTopEndRadius: 20,\n    borderBottomEndRadius: 20,\n  },\n  top:{\n    flexDirection: 'row',\n    backgroundColor: '#F1D0C5',\n    borderRadius: 20,\n    width: '30%',\n    height: '5%',\n    justifyContent: 'center',\n    top: '5%'\n  },\n  button2:{\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n})\n\n\n\nfunction ViewFriends ({navigation}){\n  const [search, setSearch] = useState([]);\n  const [term, setTerm] = useState(\"\");\n\n  const [st, setSt] = useState(\"\");\n\n  const route = useRoute();\n  \n\n  const abortController = new AbortController();\n\n  const [loadingT, setLoadingT] = useState(true);\n  const [auth, setAuth] = useState([]);\n  useEffect (() =>\n  {\n    const getAuth = async() =>{\n      try{\n        let data = await AsyncStorage.getItem(\"userAuth\");\n        var auth = JSON.parse(data)\n        //console.log(JSON.parse(auth))\n        //console.log(auth.id)\n\n        setAuth(auth);\n\n        if(Number.isInteger(auth.id)){\n          setLoadingT(false);\n        }\n      }catch(err) {\n        console.log(err)\n      }\n    }\n\n    getAuth();\n\n    return function cleanup(){\n      abortController.abort()\n    }\n  });\n\n\n  useEffect(() => {\n    \n    if (term.length <= 0){\n      term == \"\"\n    }\n    \n    const page = async () => {\n      const xhttp = await fetch('http://localhost:3333/api/1.0.0/search?q='+term+'&search_in=friends', {\n                    method: 'GET',\n                    headers: {\n                      'Accept': 'application/json',\n                      'Content-Type': 'application/json',\n                      'X-Authorization': auth.token,\n                    }\n                  })\n                  .then((response) => response.json())\n                  .then((text) => {\n                      setSearch(text);                 \n                  })\n                  .catch(function (res){\n                    //console.log(res)\n                  });\n    }\n\n    page();\n\n    return function cleanup(){\n      abortController.abort()\n    }\n\n}, [term, loadingT, route]);\n\n\n  return (\n  \n    \n    <View style={styles.center}>\n\n        <View style={styles.top}>\n\n          <Pressable style={[styles.button2, {marginLeft: 3, paddingLeft: 3} ]}  onPress={() => navigation.goBack()}>\n                <Text style={[styles.pressText, {color: '#e86868', justifyContent: 'center'}]}>Home</Text>\n          </Pressable>\n\n        </View>\n\n        \n\n        <View style={styles.searchbar}>\n          <TextInput\n              style={styles.input}\n              onChangeText={(text) => setSt(text)}\n              //value={number}\n              placeholder=\"name..\"\n              keyboardType='default'\n          />\n\n          <Pressable style={styles.button} onPress={() => setTerm(st)}>\n            <Text style={styles.pressText}>Search</Text>\n          </Pressable>\n\n        </View>\n\n        <ScrollView contentContainerStyle={styles.friends} >\n          {search.map((user) => (\n            <SpFriend\n              key={user.user_id}\n              user={user.user_id}\n              first_name= {user.user_familyname}\n              last_name={user.user_givenname}\n              token={auth.token}\n            />           \n          ))}\n        </ScrollView>\n        \n\n\n    </View>\n  );\n}\n\nexport default ViewFriends;"]},"metadata":{},"sourceType":"module"}